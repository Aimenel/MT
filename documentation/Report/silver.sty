%
% SILVER syntax highlighting for the LaTeX listings package
%

\RequirePackage{listings}

\newcommand\SilverSmall{\fontsize{10}{10.5}\selectfont}
\newcommand*\SilverFont{\SilverSmall}

\lstdefinelanguage{silver}{
    morekeywords={
        result,
        Int, Perm, Bool, Ref,
        true, false,
        null,
        method, function, predicate, domain, axiom, var, returns,
        requires, ensures, invariant,
        fold, unfold, inhale, exhale, new, assert, assume, goto,
        while, if, elsif, else,
        fresh,
        unfolding, in,
        old,
        forall, exists, forperm,
        acc, wildcard, write, none, epsilon, perm,
        Seq, Set, MultiSet, union, intersection, setminus, subset,
        unique,
        field,
        define
    },
    literate=%
%      {&&}{$\ast$}3
      {and}{\&\&}3
      {\\}{/}2
    ,
    sensitive=true,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    numbers=none,
    firstnumber=0,
    numberstyle=\tiny,
    stepnumber=5,
    basicstyle={\SilverFont},
    commentstyle={\SilverFont},
    keywordstyle=\bfseries,
    ndkeywordstyle=\bfseries,
    escapechar=@,
    mathescape=true
}
\lstnewenvironment{silver}[1][]{%
    \lstset{language=silver,
        floatplacement={tbp},captionpos=b,
        frame=lines,xleftmargin=8pt,xrightmargin=8pt,#1}}{}
\newcommand{\silverfile}[1]{
  \lstinputlisting[language=silver,%
    frame=lines,xleftmargin=8pt,xrightmargin=8pt,columns=fixed]{#1}
}

\def\inlinesilver{%
    \lstinline[language=silver,basicstyle=\ttfamily\small,columns=fixed]}

%%% http://tex.stackexchange.com/questions/100427/
%\newcommand\inlinesilver[1]{%
%    \lstinline[language=silver,basicstyle=\ttfamily\small,columns=fixed]}

%\newcommand*{\code}[1]{{\small\texttt{#1}}}
%\def\code{\inlinesilver}
\let\code\inlinesilver
